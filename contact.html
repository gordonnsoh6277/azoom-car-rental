<!DOCTYPE html>
<html>

  <head>
    <link rel = "stylesheet" href = "contact.css">
    <title>Contact Us | AZoom Car Rentals</title>
  </head>

  <body>
    <ul class="navbar">
      <li><a href = "home.html">Home</a></li>
      <li><a href = "fleet.html">Fleet</a></li>
      <li><a class = "active" href = "#contact">Contact</a></li>
      <li><a href = "about.html">About</a></li>
      <li><a style = "display: none;" href = "booking.html">Make a Booking</a></li>
      <li><a style = "display: none;" href = "history.html">Booking History</a></li>
      <li><a style = "display: none;" href = "records.html">Booking Records</a></li>
      <li class = "right"><a id = "loginLink" href = "login.html">Login</a></li>
      <li class = "right"><a id = "logoutButton" style = "display: none;" href = "#" onclick = "confirmLogout ();">Logout</a></li>
      <li class = "right"><a id = "welcomeMessage" style = "display: none;"></a></li>
    </ul>

    <div class = "companyLogo">
        <img src = "img/logo.png" height = "100px" style = "float: left;">
    <h1 style = "text-align: center;">Contact Us</h1>
    </div>

    <div class = "contactform">
        <label for = "fname">First Name</label>
        <input type = "text" id = "fname" name = "firstname" placeholder = "First Name">
      
        <label for = "lname">Last Name</label>
        <input type = "text" id = "lname" name = "lastname" placeholder = "Last Name">

        <label for = "email">Email Address</label>
        <input type = "text" id = "email" name = "email" placeholder = "Email Address">

        <label for = "query">Query Type</label><br><br>

        <input type = "radio" id = "booking" name = "query_type" value = "booking">
        <label for = "booking">Booking Enquiry</label>

        <input type = "radio" id = "modify" name = "query_type" value = "modify">
        <label for = "modify">Modify Booking</label>

        <input type = "radio" id = "past" name = "query_type" value = "past">
        <label for = "past">Past Bookings</label>

        <input type = "radio" id = "vehicle" name = "query_type" value = "vehicle">
        <label for = "vehicle">Vehicle Enquiries</label>

        <input type = "radio" id = "others" name = "query_type" value = "others">
        <label for = "others">Others</label>
        <br><br>

        <label for = "bookingNumber">Booking Number</label>
        <input type = "text" id = "bookingNumber" name = "bookingNumber" class = "bookingNumberField" placeholder = "Booking Number">

        <label for = "subject">Message</label>
        <textarea id = "subject" name = "subject" placeholder = "Write something.." style = "height:200px"></textarea>
      
        <input type = "submit" value = "Submit">
        </form>
      </div>

    <footer>
      <p>&copy; 2023 AZoom Car Rentals</p>
    </footer>

    <script>
      //get booking number text field + label
      const bookingNumberField = document.getElementById ('bookingNumber');
      const bookingNumberLabel = document.querySelector ('label[for="bookingNumber"]');
    
      //hide booking number text field + label by default
      bookingNumberField.style.display = 'none';
      bookingNumberLabel.style.display = 'none';
    
      //add change listener to radio buttons
      const radioButtons = document.querySelectorAll ('input[name = "query_type"]');
      radioButtons.forEach (radioButton  =>
      {
        radioButton.addEventListener ('change', () =>
        {
          //condition to hide/display the booking number text field + label
          if (radioButton.value  ===  'booking' || radioButton.value  ===  'modify' || radioButton.value  ===  'past')
          {
            bookingNumberField.style.display = 'block';
            bookingNumberLabel.style.display = 'block';
          }
                
          else
          {
            bookingNumberField.style.display = 'none';
            bookingNumberLabel.style.display = 'none';
          }
        });
      });
    
      //upon page load, checks if user is logged in and display welcome message + logout button if they are
      document.addEventListener ('DOMContentLoaded', function ()
      {
        //check if user is logged in, and set initial state
        var loggedIn = localStorage.getItem ('loggedIn');
        var userRole = localStorage.getItem ('userRole');

        if (loggedIn === 'true')
        {
          if (userRole === 'customer')
          {
            //show "booking.html" and "history.html" link for customers
            document.querySelector ('a[href = "booking.html"]').style.display = 'block';
            document.querySelector ('a[href = "history.html"]').style.display = 'block';
          }
          
          else if (userRole === 'employee')
          {
            //show "records.html" link for employees
            document.querySelector ('a[href = "records.html"]').style.display = 'block';
          }

          //hide login link and show welcome message and logout button
          var loginLink = document.getElementById ('loginLink');
          var welcomeMessage = document.getElementById ('welcomeMessage');
          var logoutButton = document.getElementById ('logoutButton');

          if (loginLink) loginLink.style.display = 'none';
          if (welcomeMessage)
          {
            welcomeMessage.style.display = 'block';
            welcomeMessage.textContent = 'Welcome ' + localStorage.getItem ('username');
          }

          if (logoutButton) logoutButton.style.display = 'block';
        }
      });

      //logs user out and clears the data from local storage
      function confirmLogout ()
      {
        var confirmLogout = window.confirm ('Are you sure you want to log out?');
        if (confirmLogout)
        {
          //remove user information from local storage
          localStorage.removeItem ('loggedIn');
          localStorage.removeItem ('username');
          localStorage.removeItem ('userRole')

          var loginLink = document.getElementById ('loginLink');
          var welcomeMessage = document.getElementById ('welcomeMessage');
          var logoutButton = document.getElementById ('logoutButton');
          var bookingPage = document.querySelector ('a[href = "booking.html"]');
          var historyPage = document.querySelector ('a[href = "history.html"]');
          var recordsPage = document.querySelector ('a[href = "records.html"]');

          if (loginLink) loginLink.style.display = 'block';
          if (welcomeMessage) welcomeMessage.style.display = 'none';
          if (logoutButton) logoutButton.style.display = 'none';
          if (bookingPage) bookingPage.style.display = 'none';
          if (historyPage) historyPage.style.display = 'none';
          if (recordsPage) recordsPage.style.display = 'none';
        }

        // Redirect the user to home.html
        window.location.href = 'home.html';
      }
    </script>

  </body>

</html>